<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <title>Painel - ClickDivulga</title>
  <link rel="stylesheet" href="../static/css/home.css">
</head>
<body>
  <div class="sidebar">
    <h2>ClickDivulga</h2>
    <div class="menu">
      <a href="/painel" class="active"><i>🏠</i> Dashboard</a>
      <a href="/criar-link"><i>➕</i> Criar Link</a>
      <a href="/logout"><i>🚪</i> Sair</a>
    </div>
  </div>

  <div class="content">
    <div class="topbar">
      <h1>Bem-vindo, {{ session['usuario']['email'] }}</h1>
    </div>

    <div class="cards">
      <div class="card">
        <h3>Links gerados hoje</h3>
        <p class="big">{{ links_hoje }}</p>
      </div>
      <div class="card yellow">
        <h3>Cliques no mês</h3>
        <p class="big">{{ cliques_mes }}</p>
      </div>
      <div class="card">
        <h3>Produto mais clicado</h3>
        <p class="big">{{ produto_mais_clicado }}</p>
      </div>
      <div class="card">
        <h3>Nova ação</h3>
        <a href="/criar-link" class="btn">Criar novo link</a>
      </div>
    </div>

    <div class="products">
      <h3>🔥 Produtos Quentes</h3>
      <div class="product-list">
        {% for produto in produtos_quentes %}
          <div class="product-card">
            <strong>{{ produto.nome }}</strong><br>
            <small>{{ produto.cliques }} cliques</small><br>
            <button onclick="copiarLink('{{ produto.slug }}', this)">Copiar Link</button>
            <span class="copiado-msg" style="display:none; color:green; font-size: 0.9rem; margin-top: 4px;">✅ Copiado!</span>
          </div>
        {% endfor %}
      </div>
    </div>
  </div>

  <script>
    function copiarLink(slug, botao) {
      const url = window.location.origin + "/r/" + slug;
      navigator.clipboard.writeText(url).then(() => {
        const msg = botao.nextElementSibling;
        msg.style.display = "inline";
        setTimeout(() => {
          msg.style.display = "none";
        }, 2000);
      });
    }
  </script>
</body>
</html>
