<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <title>Criar Link - ClickDivulga</title>
  <link rel="stylesheet" href="../static/css/grupos.css">
</head>
<body>
  <div class="sidebar">
  <h2>ClickDivulga</h2>
  <div class="menu">
    <a href="/painel"><i>ğŸ </i> Dashboard</a>
    <a href="/criar-link" class="active"><i>â•</i> Criar Link</a>
    <a href="/grupos"><i>ğŸ“Š</i> Desempenho de Grupos</a>
    <a href="/produtos"><i>ğŸ›ï¸</i> Produtos</a>
    <a href="/minha-api"><i>ğŸ”</i> Config Afiliado</a>
    <a href="/config-bot"><i>ğŸ¤–</i> Telegram</a>
    <a href="/logout"><i>ğŸšª</i> Sair</a>
  </div>
</div>

  <div class="content">
    <div class="topbar">
      <h1>ğŸ“ Gerar Link Camuflado com Rastreamento</h1>
    </div>

   <!-- ğŸ”— FormulÃ¡rio de CriaÃ§Ã£o de Link -->
<div style="background:white; padding: 30px; border-radius: 16px; box-shadow: 0 2px 8px rgba(0,0,0,0.05); margin-bottom: 40px; max-width: 700px;">
  <h2 style="margin-bottom: 20px; color: #5e3ea1;">ğŸ“ Gerar Link Camuflado com Rastreamento</h2>

  <form method="POST">
    <div style="margin-bottom: 20px;">
      <label style="font-weight: 600;">Nome do Link (slug personalizado):</label>
      <input type="text" name="slug" placeholder="ex: grupo-vip-ofertas" required style="width: 100%; padding: 10px; margin-top: 6px; border: 1px solid #ccc; border-radius: 8px; font-size: 1rem;">
    </div>

    <div style="margin-bottom: 20px;">
      <label style="font-weight: 600;">URL de destino (link final):</label>
      <input type="url" name="url_destino" placeholder="Cole aqui o link do WhatsApp, produto ou pÃ¡gina" required style="width: 100%; padding: 10px; margin-top: 6px; border: 1px solid #ccc; border-radius: 8px; font-size: 1rem;">
    </div>

    <div style="margin-bottom: 20px;">
      <label style="font-weight: 600;">Tipo de link:</label>
      <select name="tipo" required style="width: 100%; padding: 10px; margin-top: 6px; border: 1px solid #ccc; border-radius: 8px; font-size: 1rem;">
        <option value="whatsapp">Grupo WhatsApp</option>
        <option value="produto">Produto</option>
        <option value="contador">Contador de Cliques (sem redirecionar)</option>
      </select>
    </div>

    <button type="submit" style="background-color: #5e3ea1; color: white; border: none; padding: 12px 20px; border-radius: 8px; font-size: 1rem; cursor: pointer;">Criar Link Camuflado</button>

    <p style="margin-top: 20px; background-color: #f1f1f1; padding: 14px; border-left: 4px solid #5e3ea1; border-radius: 6px; font-size: 0.95rem;">
      O link gerado serÃ¡ camuflado como: <br>
      <code>https://clickdivulga.com/r/&lt;slug&gt;</code><br>
      e poderÃ¡ ser usado para rastrear cliques e engajamento com seguranÃ§a.
    </p>
  </form>
</div>

  <!-- Lista de links -->
<div style="background:white; padding:30px; border-radius:16px; box-shadow:0 2px 8px rgba(0,0,0,0.05); margin-top: 40px;">
  <h2 style="margin-bottom:20px;">ğŸ§¾ Seus Links Criados</h2>
  {% if links %}
  <table class="group-table">
    <thead>
      <tr>
        <th>Slug</th>
        <th>Tipo</th>
        <th>Cliques</th>
        <th>AÃ§Ãµes</th>
      </tr>
    </thead>
    <tbody>
      {% for link in links %}
      <tr>
        <td><strong>{{ link.slug }}</strong></td>
        <td>{{ link.categoria }}</td>
        <td>{{ link.cliques }}</td>
        <td style="display: flex; justify-content: center; gap: 10px;">
          <a href="/editar-link/{{ link.id }}" class="btn">âœï¸ Editar</a>
          <a href="/excluir-link/{{ link.id }}" class="btn danger" onclick="return confirm('Tem certeza que deseja excluir este link?')">ğŸ—‘ï¸ Excluir</a>
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
  {% else %}
    <p style="padding: 10px; color: #666;">VocÃª ainda nÃ£o criou nenhum link.</p>
  {% endif %}
</div>
