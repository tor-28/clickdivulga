<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <title>Criar Link - ClickDivulga</title>
  <link rel="stylesheet" href="../static/css/criar_link.css">
</head>
<body>
  <div class="sidebar">
    <h2>ClickDivulga</h2>
    <div class="menu">
      <a href="/painel"><i>🏠</i> Dashboard</a>
      <a href="/criar-link" class="active"><i>➕</i> Criar Link</a>
      <a href="/grupos"><i>📈</i> Desempenho por Grupos</a>
      <a href="/logout"><i>🚪</i> Sair</a>
    </div>
  </div>

  <div class="content">
    <div class="topbar">
      <h1>📎 Gerar Link Camuflado com Rastreamento</h1>
    </div>

    <form method="POST">
      <label>
        Nome do Link (slug personalizado):
        <input type="text" name="slug" placeholder="ex: grupo-vip-ofertas" required>
      </label>

      <label>
        URL de destino (link final):
        <input type="url" name="url_destino" placeholder="Cole aqui o link do WhatsApp, produto ou página" required>
      </label>

      <label>
        Tipo de link:
        <select name="tipo" required>
          <option value="whatsapp">Grupo WhatsApp</option>
          <option value="produto">Produto</option>
          <option value="contador">Contador de Cliques (sem redirecionar)</option>
        </select>
      </label>

      <button type="submit">Criar Link Camuflado</button>

      <p class="info">
        O link gerado será camuflado como: <br>
        <code>https://clickdivulga.com/r/&lt;slug&gt;</code><br>
        e poderá ser usado para rastrear cliques e engajamento com segurança.
      </p>
    </form>

    <hr>

    <div class="lista-links">
      <h2>🧾 Seus Links Criados</h2>
      {% if links %}
        <table>
          <thead>
            <tr>
              <th>Slug</th>
              <th>Tipo</th>
              <th>Cliques</th>
              <th>Ações</th>
            </tr>
          </thead>
          <tbody>
            {% for link in links %}
              <tr>
                <td>{{ link.slug }}</td>
                <td>{{ link.categoria }}</td>
                <td>{{ link.cliques }}</td>
                <td>
                  <a href="/editar-link/{{ link.id }}" class="btn">✏️ Editar</a>
                  <a href="/excluir-link/{{ link.id }}" class="btn danger" onclick="return confirm('Tem certeza que deseja excluir este link?')">🗑️ Excluir</a>
                </td>
              </tr>
            {% endfor %}
          </tbody>
        </table>
      {% else %}
        <p>Você ainda não criou nenhum link.</p>
      {% endif %}
    </div>
  </div>
</body>
</html>
